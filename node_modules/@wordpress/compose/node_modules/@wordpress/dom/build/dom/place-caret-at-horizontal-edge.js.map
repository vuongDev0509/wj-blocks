{"version":3,"sources":["@wordpress/dom/src/dom/place-caret-at-horizontal-edge.js"],"names":["placeCaretAtHorizontalEdge","container","isReverse","mayUseScroll","focus","selectionStart","value","length","selectionEnd","isContentEditable","ownerDocument","containerRect","getBoundingClientRect","x","right","left","y","bottom","top","range","startContainer","contains","scrollIntoView","defaultView","selection","getSelection","removeAllRanges","addRange"],"mappings":";;;;;;;;;AAGA;;AAKA;;AACA;;AATA;AACA;AACA;;AAGA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASA,0BAAT,CACdC,SADc,EAEdC,SAFc,EAIb;AAAA,MADDC,YACC,uEADc,KACd;;AACD,MAAK,CAAEF,SAAP,EAAmB;AAClB;AACA;;AAEDA,EAAAA,SAAS,CAACG,KAAV;;AAEA,MAAK,gCAAmBH,SAAnB,CAAL,EAAsC;AACrC;AACA,QAAK,OAAOA,SAAS,CAACI,cAAjB,KAAoC,QAAzC,EAAoD;AACnD;AACA;;AAED,QAAKH,SAAL,EAAiB;AAChBD,MAAAA,SAAS,CAACI,cAAV,GAA2BJ,SAAS,CAACK,KAAV,CAAgBC,MAA3C;AACAN,MAAAA,SAAS,CAACO,YAAV,GAAyBP,SAAS,CAACK,KAAV,CAAgBC,MAAzC;AACA,KAHD,MAGO;AACNN,MAAAA,SAAS,CAACI,cAAV,GAA2B,CAA3B;AACAJ,MAAAA,SAAS,CAACO,YAAV,GAAyB,CAAzB;AACA;;AAED;AACA;;AAED,MAAK,CAAEP,SAAS,CAACQ,iBAAjB,EAAqC;AACpC;AACA;;AA1BA,MA4BOC,aA5BP,GA4ByBT,SA5BzB,CA4BOS,aA5BP;AA6BD,MAAMC,aAAa,GAAGV,SAAS,CAACW,qBAAV,EAAtB,CA7BC,CA8BD;AACA;;AACA,MAAMC,CAAC,GAAGX,SAAS,GAAGS,aAAa,CAACG,KAAd,GAAsB,CAAzB,GAA6BH,aAAa,CAACI,IAAd,GAAqB,CAArE;AACA,MAAMC,CAAC,GAAGd,SAAS,GAAGS,aAAa,CAACM,MAAd,GAAuB,CAA1B,GAA8BN,aAAa,CAACO,GAAd,GAAoB,CAArE;AACA,MAAMC,KAAK,GAAG,wCAA2BT,aAA3B,EAA0CG,CAA1C,EAA6CG,CAA7C,EAAgDf,SAAhD,CAAd,CAlCC,CAoCD;AACA;;AACA,MACC,CAAEkB,KAAF,IACA,CAAEA,KAAK,CAACC,cADR,IAEA,CAAEnB,SAAS,CAACoB,QAAV,CAAoBF,KAAK,CAACC,cAA1B,CAHH,EAIE;AACD,QAAK,CAAEjB,YAAP,EAAsB;AACrB;AACA,KAHA,CAKD;;;AACAA,IAAAA,YAAY,GAAG,KAAf;AACAF,IAAAA,SAAS,CAACqB,cAAV,CAA0BpB,SAA1B;AACAF,IAAAA,0BAA0B,CAAEC,SAAF,EAAaC,SAAb,EAAwBC,YAAxB,CAA1B;AACA;AACA;;AApDA,MAsDOoB,WAtDP,GAsDuBb,aAtDvB,CAsDOa,WAtDP;AAuDD,wCAAiBA,WAAjB,EAA8B,aAA9B;AACA,MAAMC,SAAS,GAAGD,WAAW,CAACE,YAAZ,EAAlB;AACA,wCAAiBD,SAAjB,EAA4B,WAA5B;AACAA,EAAAA,SAAS,CAACE,eAAV;AACAF,EAAAA,SAAS,CAACG,QAAV,CAAoBR,KAApB;AACA","sourcesContent":["/**\n * Internal dependencies\n */\nimport { assertIsDefined } from '../utils/assert-is-defined';\n\n/**\n * Internal dependencies\n */\nimport hiddenCaretRangeFromPoint from './hidden-caret-range-from-point';\nimport isInputOrTextArea from './is-input-or-text-area';\n\n/**\n * Places the caret at start or end of a given element.\n *\n * @param {HTMLElement} container    Focusable element.\n * @param {boolean} isReverse    True for end, false for start.\n * @param {boolean} [mayUseScroll=false] Whether to allow scrolling.\n */\nexport default function placeCaretAtHorizontalEdge(\n\tcontainer,\n\tisReverse,\n\tmayUseScroll = false\n) {\n\tif ( ! container ) {\n\t\treturn;\n\t}\n\n\tcontainer.focus();\n\n\tif ( isInputOrTextArea( container ) ) {\n\t\t// The element may not support selection setting.\n\t\tif ( typeof container.selectionStart !== 'number' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isReverse ) {\n\t\t\tcontainer.selectionStart = container.value.length;\n\t\t\tcontainer.selectionEnd = container.value.length;\n\t\t} else {\n\t\t\tcontainer.selectionStart = 0;\n\t\t\tcontainer.selectionEnd = 0;\n\t\t}\n\n\t\treturn;\n\t}\n\n\tif ( ! container.isContentEditable ) {\n\t\treturn;\n\t}\n\n\tconst { ownerDocument } = container;\n\tconst containerRect = container.getBoundingClientRect();\n\t// When placing at the end (isReverse), find the closest range to the bottom\n\t// right corner. When placing at the start, to the top left corner.\n\tconst x = isReverse ? containerRect.right - 1 : containerRect.left + 1;\n\tconst y = isReverse ? containerRect.bottom - 1 : containerRect.top + 1;\n\tconst range = hiddenCaretRangeFromPoint( ownerDocument, x, y, container );\n\n\t// If no range range can be created or it is outside the container, the\n\t// element may be out of view.\n\tif (\n\t\t! range ||\n\t\t! range.startContainer ||\n\t\t! container.contains( range.startContainer )\n\t) {\n\t\tif ( ! mayUseScroll ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Only try to scroll into view once to avoid an infinite loop.\n\t\tmayUseScroll = false;\n\t\tcontainer.scrollIntoView( isReverse );\n\t\tplaceCaretAtHorizontalEdge( container, isReverse, mayUseScroll );\n\t\treturn;\n\t}\n\n\tconst { defaultView } = ownerDocument;\n\tassertIsDefined( defaultView, 'defaultView' );\n\tconst selection = defaultView.getSelection();\n\tassertIsDefined( selection, 'selection' );\n\tselection.removeAllRanges();\n\tselection.addRange( range );\n}\n"]}