{"version":3,"sources":["@wordpress/components/src/color-picker/use-deprecated-props.ts"],"names":["colord","memoize","useCallback","useMemo","isLegacyProps","props","onChangeComplete","disableAlpha","color","hex","getColorFromLegacyProps","undefined","transformColorStringToLegacyColor","colordColor","toHex","rgb","toRgb","hsv","toHsv","hsl","toHsl","source","oldHue","h","useDeprecatedProps","onChange","enableAlpha"],"mappings":"AAAA;AACA;AACA;AACA,SACCA,MADD,QAQO,QARP;AAUA,OAAOC,OAAP,MAAoB,QAApB;AAEA;AACA;AACA;;AACA,SAASC,WAAT,EAAsBC,OAAtB,QAAqC,oBAArC;AAEA;AACA;AACA;;AA6CA,SAASC,aAAT,CAAwBC,KAAxB,EAA2D;AAAA;;AAC1D,SACC,OAAOA,KAAK,CAACC,gBAAb,KAAkC,WAAlC,IACA,OAAOD,KAAK,CAACE,YAAb,KAA8B,WAD9B,IAEA,wBAAOF,KAAK,CAACG,KAAb,iDAAO,aAAaC,GAApB,MAA4B,QAH7B;AAKA;;AAED,SAASC,uBAAT,CAAkCL,KAAlC,EAA2E;AAC1E,MAAK,QAAOA,KAAP,aAAOA,KAAP,uBAAOA,KAAK,CAAEG,KAAd,MAAwB,WAA7B,EAA2C;AAC1C,WAAOG,SAAP;AACA;;AACD,MAAK,OAAON,KAAK,CAACG,KAAb,KAAuB,QAA5B,EAAuC;AACtC,WAAOH,KAAK,CAACG,KAAb;AACA;;AACD,MAAKH,KAAK,CAACG,KAAN,CAAYC,GAAjB,EAAuB;AACtB,WAAOJ,KAAK,CAACG,KAAN,CAAYC,GAAnB;AACA;;AAED,SAAOE,SAAP;AACA;;AAED,MAAMC,iCAAiC,GAAGX,OAAO,CAC9CO,KAAF,IAAkC;AACjC,QAAMK,WAAW,GAAGb,MAAM,CAAEQ,KAAF,CAA1B;AACA,QAAMC,GAAG,GAAGI,WAAW,CAACC,KAAZ,EAAZ;AACA,QAAMC,GAAG,GAAGF,WAAW,CAACG,KAAZ,EAAZ;AACA,QAAMC,GAAG,GAAGJ,WAAW,CAACK,KAAZ,EAAZ;AACA,QAAMC,GAAG,GAAGN,WAAW,CAACO,KAAZ,EAAZ;AAEA,SAAO;AACNX,IAAAA,GADM;AAENM,IAAAA,GAFM;AAGNE,IAAAA,GAHM;AAINE,IAAAA,GAJM;AAKNE,IAAAA,MAAM,EAAE,KALF;AAMNC,IAAAA,MAAM,EAAEH,GAAG,CAACI;AANN,GAAP;AAQA,CAhB+C,CAAjD;AAmBA,OAAO,SAASC,kBAAT,CACNnB,KADM,EAEa;AACnB,QAAMoB,QAAQ,GAAGvB,WAAW,CACzBM,KAAF,IAAqB;AAAA;;AACpB,QAAKJ,aAAa,CAAEC,KAAF,CAAlB,EAA8B;AAC7B,aAAOA,KAAK,CAACC,gBAAN,CACNM,iCAAiC,CAAEJ,KAAF,CAD3B,CAAP;AAGA;;AAED,8BAAOH,KAAK,CAACoB,QAAb,oDAAO,qBAAApB,KAAK,EAAaG,KAAb,CAAZ;AACA,GAT0B,EAU3B,CACGH,KAAF,CAAyBC,gBAD1B,EAEGD,KAAF,CAA8BoB,QAF/B,CAV2B,CAA5B;AAgBA,QAAMjB,KAAK,GAAGL,OAAO,CAAE,MAAM;AAC5B,WAAOC,aAAa,CAAEC,KAAF,CAAb,GACJK,uBAAuB,CAAEL,KAAF,CADnB,GAEJA,KAAK,CAACG,KAFT;AAGA,GAJoB,EAIlB,CAAEH,KAAK,CAACG,KAAR,CAJkB,CAArB;AAMA,QAAMkB,WAAW,GAAGvB,OAAO,CAAE,MAAM;AAClC,WAAOC,aAAa,CAAEC,KAAF,CAAb,GACJ,CAAEA,KAAK,CAACE,YADJ,GAEJF,KAAK,CAACqB,WAFT;AAGA,GAJ0B,EAIxB,CACArB,KAAF,CAAyBE,YADvB,EAEAF,KAAF,CAA8BqB,WAF5B,CAJwB,CAA3B;AASA,SAAO,EACN,IAAKtB,aAAa,CAAEC,KAAF,CAAb,GAAyB,EAAzB,GAA8BA,KAAnC,CADM;AAENoB,IAAAA,QAFM;AAGNjB,IAAAA,KAHM;AAINkB,IAAAA;AAJM,GAAP;AAMA","sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tcolord,\n\tHslColor,\n\tHslaColor,\n\tHsvColor,\n\tHsvaColor,\n\tRgbColor,\n\tRgbaColor,\n} from 'colord';\nimport type { ComponentProps } from 'react';\nimport memoize from 'memize';\n\n/**\n * WordPress dependencies\n */\nimport { useCallback, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport type ColorPicker from './component';\n\ntype ColorPickerProps = ComponentProps< typeof ColorPicker >;\n\n/**\n * @deprecated\n */\ntype LegacyColor =\n\t| string\n\t| {\n\t\t\thex: string;\n\t\t\thsl: HslColor | HslaColor;\n\t\t\thsv: HsvColor | HsvaColor;\n\t\t\trgb: RgbColor | RgbaColor;\n\t\t\t/**\n\t\t\t * @deprecated\n\t\t\t */\n\t\t\toldHue: number;\n\t\t\t/**\n\t\t\t * @deprecated\n\t\t\t */\n\t\t\tsource: 'hex';\n\t  };\n\n/**\n * @deprecated\n */\nexport interface LegacyProps {\n\tcolor?: LegacyColor;\n\t/**\n\t * @deprecated\n\t */\n\tonChangeComplete: ( colors: LegacyColor ) => void;\n\t/**\n\t * @deprecated\n\t */\n\toldHue: string;\n\tclassName: string;\n\t/**\n\t * @deprecated\n\t */\n\tdisableAlpha: boolean;\n}\n\nfunction isLegacyProps( props: any ): props is LegacyProps {\n\treturn (\n\t\ttypeof props.onChangeComplete !== 'undefined' ||\n\t\ttypeof props.disableAlpha !== 'undefined' ||\n\t\ttypeof props.color?.hex === 'string'\n\t);\n}\n\nfunction getColorFromLegacyProps( props: LegacyProps ): string | undefined {\n\tif ( typeof props?.color === 'undefined' ) {\n\t\treturn undefined;\n\t}\n\tif ( typeof props.color === 'string' ) {\n\t\treturn props.color;\n\t}\n\tif ( props.color.hex ) {\n\t\treturn props.color.hex;\n\t}\n\n\treturn undefined;\n}\n\nconst transformColorStringToLegacyColor = memoize(\n\t( color: string ): LegacyColor => {\n\t\tconst colordColor = colord( color );\n\t\tconst hex = colordColor.toHex();\n\t\tconst rgb = colordColor.toRgb();\n\t\tconst hsv = colordColor.toHsv();\n\t\tconst hsl = colordColor.toHsl();\n\n\t\treturn {\n\t\t\thex,\n\t\t\trgb,\n\t\t\thsv,\n\t\t\thsl,\n\t\t\tsource: 'hex',\n\t\t\toldHue: hsl.h,\n\t\t};\n\t}\n);\n\nexport function useDeprecatedProps(\n\tprops: LegacyProps | ColorPickerProps\n): ColorPickerProps {\n\tconst onChange = useCallback(\n\t\t( color: string ) => {\n\t\t\tif ( isLegacyProps( props ) ) {\n\t\t\t\treturn props.onChangeComplete(\n\t\t\t\t\ttransformColorStringToLegacyColor( color )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn props.onChange?.( color );\n\t\t},\n\t\t[\n\t\t\t( props as LegacyProps ).onChangeComplete,\n\t\t\t( props as ColorPickerProps ).onChange,\n\t\t]\n\t);\n\n\tconst color = useMemo( () => {\n\t\treturn isLegacyProps( props )\n\t\t\t? getColorFromLegacyProps( props )\n\t\t\t: props.color;\n\t}, [ props.color ] );\n\n\tconst enableAlpha = useMemo( () => {\n\t\treturn isLegacyProps( props )\n\t\t\t? ! props.disableAlpha\n\t\t\t: props.enableAlpha;\n\t}, [\n\t\t( props as LegacyProps ).disableAlpha,\n\t\t( props as ColorPickerProps ).enableAlpha,\n\t] );\n\n\treturn {\n\t\t...( isLegacyProps( props ) ? {} : props ),\n\t\tonChange,\n\t\tcolor,\n\t\tenableAlpha,\n\t};\n}\n"]}